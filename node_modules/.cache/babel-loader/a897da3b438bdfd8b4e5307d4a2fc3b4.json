{"ast":null,"code":"import _defineProperty from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/snu-blog/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _handleActions;\n\nimport { createAction, handleActions } from \"redux-actions\";\nimport { Map } from \"immutable\"; // action types\n\nvar LOGIN_BEGIN = \"accounts/LOGIN_BEGIN\";\nvar LOGIN_SUCCESS = \"accounts/LOGIN_SUCCESS\";\nvar LOGIN_FAILURE = \"accounts/LOGIN_FAILURE\";\nvar CHANGE_LOGIN_INPUT = \"accounts/CHANGE_LOGIN_INPUT\";\nvar CHECK_LOGGED_BEGIN = \"accounts/CHECK_LOGGED_BEGIN\";\nvar CHECK_LOGGED_SUCCESS = \"accounts/CHECK_LOGGED_SUCCESS\";\nvar CHECK_LOGGED_FAILURE = \"accounts/CHECK_LOGGED_FAILURE\";\nvar REGISTER_BEGIN = \"accounts/REGISTER_BEGIN\";\nvar REGISTER_SUCCESS = \"accounts/REGISTER_SUCCESS\";\nvar REGISTER_FAILURE = \"accounts/REGISTER_FAILURE\";\nvar CHANGE_REG_INPUT = \"accounts/CHANGE_REG_INPUT\";\nvar REG_INPUT_ERROR = \"accounts/REG_INPUT_ERROR\";\nvar LOGOUT = \"accounts/LOGOUT\";\nvar TEMP_LOGIN = \"accounts/TEMP_LOGIN\"; // action creators\n\nexport var loginBegin = createAction(LOGIN_BEGIN);\nexport var loginSuccess = createAction(LOGIN_SUCCESS);\nexport var loginFailure = createAction(LOGIN_FAILURE);\nexport var changeLoginInput = createAction(CHANGE_LOGIN_INPUT);\nexport var checkLoggedBegin = createAction(CHECK_LOGGED_BEGIN);\nexport var checkLoggedSuccess = createAction(CHECK_LOGGED_SUCCESS);\nexport var checkLoggedFailure = createAction(CHECK_LOGGED_FAILURE);\nexport var registerBegin = createAction(REGISTER_BEGIN);\nexport var registerSuccess = createAction(REGISTER_SUCCESS);\nexport var registerFailure = createAction(REGISTER_FAILURE);\nexport var changeRegInput = createAction(CHANGE_REG_INPUT);\nexport var regInputError = createAction(REG_INPUT_ERROR);\nexport var logout = createAction(LOGOUT);\nexport var tempLogin = createAction(TEMP_LOGIN); // initial state\n\nvar initialState = Map({\n  login: Map({\n    loading: false,\n    username: \"\",\n    password: \"\",\n    error: null\n  }),\n  register: Map({\n    loading: false,\n    username: \"\",\n    password: \"\",\n    password2: \"\",\n    email: \"\",\n    inputError: null,\n    error: null\n  }),\n  check: Map({\n    loading: false,\n    error: null\n  }),\n  logged: localStorage.getItem(\"auth\") ? JSON.parse(localStorage.getItem(\"auth\"))[\"logged\"] : false,\n  redirect: false,\n  authToken: localStorage.getItem(\"auth\") ? JSON.parse(localStorage.getItem(\"auth\"))[\"authToken\"] : null,\n  userId: localStorage.getItem(\"auth\") ? JSON.parse(localStorage.getItem(\"auth\"))[\"userId\"] : null,\n  username: localStorage.getItem(\"auth\") ? JSON.parse(localStorage.getItem(\"auth\"))[\"username\"] : null\n});\nexport default handleActions((_handleActions = {}, _defineProperty(_handleActions, LOGIN_BEGIN, function (state, action) {\n  return state.setIn([\"login\", \"loading\"], true).setIn([\"error\"], null);\n}), _defineProperty(_handleActions, LOGIN_SUCCESS, function (state, action) {\n  var _action$payload = action.payload,\n      token = _action$payload.token,\n      user = _action$payload.user;\n  var username = user.username,\n      id = user.id;\n  localStorage.setItem(\"auth\", JSON.stringify({\n    logged: true,\n    authToken: token,\n    userId: id,\n    username: username\n  }));\n  return state.setIn([\"login\", \"loading\"], false).set(\"logged\", true).set(\"authToken\", token).set(\"userId\", id).set(\"username\", username).set(\"redirect\", true);\n}), _defineProperty(_handleActions, LOGIN_FAILURE, function (state, action) {\n  var message = action.payload.error;\n  return state.setIn([\"login\", \"loading\"], false).setIn([\"login\", \"error\"], message).setIn([\"login\", \"password\"], \"\");\n}), _defineProperty(_handleActions, CHANGE_LOGIN_INPUT, function (state, action) {\n  var _action$payload2 = action.payload,\n      type = _action$payload2.type,\n      value = _action$payload2.value;\n  return state.setIn([\"login\", type], value);\n}), _defineProperty(_handleActions, CHECK_LOGGED_BEGIN, function (state, action) {\n  return state.setIn([\"check\", \"loading\"], true).setIn([\"check\", \"error\"], null);\n}), _defineProperty(_handleActions, CHECK_LOGGED_SUCCESS, function (state, action) {\n  var _action$payload3 = action.payload,\n      logged = _action$payload3.logged,\n      token = _action$payload3.token,\n      id = _action$payload3.id,\n      username = _action$payload3.username;\n  localStorage.setItem(\"auth\", JSON.stringify({\n    logged: logged,\n    authToken: token,\n    userId: id,\n    username: username\n  }));\n  return state.setIn([\"check\", \"loading\"], false).set(\"logged\", true).set(\"authToken\", token).set(\"userId\", id).set(\"username\", username);\n}), _defineProperty(_handleActions, CHECK_LOGGED_FAILURE, function (state, action) {\n  localStorage.removeItem(\"auth\");\n  return state.setIn([\"check\", \"loading\"], false).set(\"logged\", false).setIn([\"check\", \"error\"], action.payload.error).set(\"authToken\", null).set(\"userId\", null).set(\"username\", null).set(\"redirect\", false);\n}), _defineProperty(_handleActions, REGISTER_BEGIN, function (state, action) {\n  return state.setIn([\"register\", \"loading\"], true).setIn([\"register\", \"inputError\"], null).setIn([\"register\", \"error\"], null);\n}), _defineProperty(_handleActions, REGISTER_SUCCESS, function (state, action) {\n  var _action$payload4 = action.payload,\n      token = _action$payload4.token,\n      user = _action$payload4.user;\n  var username = user.username,\n      id = user.id;\n  localStorage.setItem(\"auth\", JSON.stringify({\n    logged: true,\n    authToken: token,\n    userId: id,\n    username: username\n  }));\n  return state.setIn([\"register\", \"loading\"], false).set(\"logged\", true).set(\"authToken\", token).set(\"userId\", id).set(\"username\", username).set(\"redirect\", true);\n}), _defineProperty(_handleActions, REGISTER_FAILURE, function (state, action) {\n  return state.setIn([\"register\", \"loading\"], false).setIn([\"register\", \"error\"], action.payload.error);\n}), _defineProperty(_handleActions, CHANGE_REG_INPUT, function (state, action) {\n  var _action$payload5 = action.payload,\n      type = _action$payload5.type,\n      value = _action$payload5.value;\n  return state.setIn([\"register\", type], value);\n}), _defineProperty(_handleActions, REG_INPUT_ERROR, function (state, action) {\n  var error = action.payload.error;\n  return state.setIn([\"register\", \"inputError\"], error);\n}), _defineProperty(_handleActions, LOGOUT, function (state, action) {\n  localStorage.removeItem(\"auth\");\n  return state.set(\"logged\", false).set(\"authToken\", null).set(\"userId\", null).set(\"username\", null).set(\"redirect\", false);\n}), _defineProperty(_handleActions, TEMP_LOGIN, function (state, action) {\n  return state.set(\"logged\", true);\n}), _handleActions), initialState);","map":{"version":3,"sources":["/Users/ruby/Desktop/수업/2020-1/벤창웹2/snu-blog/src/store/modules/accounts.js"],"names":["createAction","handleActions","Map","LOGIN_BEGIN","LOGIN_SUCCESS","LOGIN_FAILURE","CHANGE_LOGIN_INPUT","CHECK_LOGGED_BEGIN","CHECK_LOGGED_SUCCESS","CHECK_LOGGED_FAILURE","REGISTER_BEGIN","REGISTER_SUCCESS","REGISTER_FAILURE","CHANGE_REG_INPUT","REG_INPUT_ERROR","LOGOUT","TEMP_LOGIN","loginBegin","loginSuccess","loginFailure","changeLoginInput","checkLoggedBegin","checkLoggedSuccess","checkLoggedFailure","registerBegin","registerSuccess","registerFailure","changeRegInput","regInputError","logout","tempLogin","initialState","login","loading","username","password","error","register","password2","email","inputError","check","logged","localStorage","getItem","JSON","parse","redirect","authToken","userId","state","action","setIn","payload","token","user","id","setItem","stringify","set","message","type","value","removeItem"],"mappings":"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","sourcesContent":["import { createAction, handleActions } from \"redux-actions\";\n\nimport { Map } from \"immutable\";\n\n// action types\nconst LOGIN_BEGIN = \"accounts/LOGIN_BEGIN\";\nconst LOGIN_SUCCESS = \"accounts/LOGIN_SUCCESS\";\nconst LOGIN_FAILURE = \"accounts/LOGIN_FAILURE\";\nconst CHANGE_LOGIN_INPUT = \"accounts/CHANGE_LOGIN_INPUT\";\nconst CHECK_LOGGED_BEGIN = \"accounts/CHECK_LOGGED_BEGIN\";\nconst CHECK_LOGGED_SUCCESS = \"accounts/CHECK_LOGGED_SUCCESS\";\nconst CHECK_LOGGED_FAILURE = \"accounts/CHECK_LOGGED_FAILURE\";\n\nconst REGISTER_BEGIN = \"accounts/REGISTER_BEGIN\";\nconst REGISTER_SUCCESS = \"accounts/REGISTER_SUCCESS\";\nconst REGISTER_FAILURE = \"accounts/REGISTER_FAILURE\";\nconst CHANGE_REG_INPUT = \"accounts/CHANGE_REG_INPUT\";\nconst REG_INPUT_ERROR = \"accounts/REG_INPUT_ERROR\";\n\nconst LOGOUT = \"accounts/LOGOUT\";\nconst TEMP_LOGIN = \"accounts/TEMP_LOGIN\";\n\n// action creators\nexport const loginBegin = createAction(LOGIN_BEGIN);\nexport const loginSuccess = createAction(LOGIN_SUCCESS);\nexport const loginFailure = createAction(LOGIN_FAILURE);\nexport const changeLoginInput = createAction(CHANGE_LOGIN_INPUT);\nexport const checkLoggedBegin = createAction(CHECK_LOGGED_BEGIN);\nexport const checkLoggedSuccess = createAction(CHECK_LOGGED_SUCCESS);\nexport const checkLoggedFailure = createAction(CHECK_LOGGED_FAILURE);\n\nexport const registerBegin = createAction(REGISTER_BEGIN);\nexport const registerSuccess = createAction(REGISTER_SUCCESS);\nexport const registerFailure = createAction(REGISTER_FAILURE);\nexport const changeRegInput = createAction(CHANGE_REG_INPUT);\nexport const regInputError = createAction(REG_INPUT_ERROR);\n\nexport const logout = createAction(LOGOUT);\nexport const tempLogin = createAction(TEMP_LOGIN);\n\n// initial state\nconst initialState = Map({\n  login: Map({\n    loading: false,\n    username: \"\",\n    password: \"\",\n    error: null\n  }),\n  register: Map({\n    loading: false,\n    username: \"\",\n    password: \"\",\n    password2: \"\",\n    email: \"\",\n    inputError: null,\n    error: null\n  }),\n  check: Map({\n    loading: false,\n    error: null\n  }),\n  logged: localStorage.getItem(\"auth\")\n    ? JSON.parse(localStorage.getItem(\"auth\"))[\"logged\"]\n    : false,\n  redirect: false,\n  authToken: localStorage.getItem(\"auth\")\n    ? JSON.parse(localStorage.getItem(\"auth\"))[\"authToken\"]\n    : null,\n  userId: localStorage.getItem(\"auth\")\n    ? JSON.parse(localStorage.getItem(\"auth\"))[\"userId\"]\n    : null,\n  username: localStorage.getItem(\"auth\")\n    ? JSON.parse(localStorage.getItem(\"auth\"))[\"username\"]\n    : null\n});\n\nexport default handleActions(\n  {\n    [LOGIN_BEGIN]: (state, action) => {\n      return state.setIn([\"login\", \"loading\"], true).setIn([\"error\"], null);\n    },\n    [LOGIN_SUCCESS]: (state, action) => {\n      const { token, user } = action.payload;\n      const { username, id } = user;\n\n      localStorage.setItem(\n        \"auth\",\n        JSON.stringify({\n          logged: true,\n          authToken: token,\n          userId: id,\n          username: username\n        })\n      );\n\n      return state\n        .setIn([\"login\", \"loading\"], false)\n        .set(\"logged\", true)\n        .set(\"authToken\", token)\n        .set(\"userId\", id)\n        .set(\"username\", username)\n        .set(\"redirect\", true);\n    },\n    [LOGIN_FAILURE]: (state, action) => {\n      const { error: message } = action.payload;\n      return state\n        .setIn([\"login\", \"loading\"], false)\n        .setIn([\"login\", \"error\"], message)\n        .setIn([\"login\", \"password\"], \"\");\n    },\n    [CHANGE_LOGIN_INPUT]: (state, action) => {\n      const { type, value } = action.payload;\n      return state.setIn([\"login\", type], value);\n    },\n    [CHECK_LOGGED_BEGIN]: (state, action) => {\n      return state\n        .setIn([\"check\", \"loading\"], true)\n        .setIn([\"check\", \"error\"], null);\n    },\n    [CHECK_LOGGED_SUCCESS]: (state, action) => {\n      const { logged, token, id, username } = action.payload;\n      localStorage.setItem(\n        \"auth\",\n        JSON.stringify({\n          logged: logged,\n          authToken: token,\n          userId: id,\n          username: username\n        })\n      );\n      return state\n        .setIn([\"check\", \"loading\"], false)\n        .set(\"logged\", true)\n        .set(\"authToken\", token)\n        .set(\"userId\", id)\n        .set(\"username\", username);\n    },\n    [CHECK_LOGGED_FAILURE]: (state, action) => {\n      localStorage.removeItem(\"auth\");\n      return state\n        .setIn([\"check\", \"loading\"], false)\n        .set(\"logged\", false)\n        .setIn([\"check\", \"error\"], action.payload.error)\n        .set(\"authToken\", null)\n        .set(\"userId\", null)\n        .set(\"username\", null)\n        .set(\"redirect\", false);\n    },\n    [REGISTER_BEGIN]: (state, action) => {\n      return state\n        .setIn([\"register\", \"loading\"], true)\n        .setIn([\"register\", \"inputError\"], null)\n        .setIn([\"register\", \"error\"], null);\n    },\n    [REGISTER_SUCCESS]: (state, action) => {\n      const { token, user } = action.payload;\n      const { username, id } = user;\n\n      localStorage.setItem(\n        \"auth\",\n        JSON.stringify({\n          logged: true,\n          authToken: token,\n          userId: id,\n          username: username\n        })\n      );\n      return state\n        .setIn([\"register\", \"loading\"], false)\n        .set(\"logged\", true)\n        .set(\"authToken\", token)\n        .set(\"userId\", id)\n        .set(\"username\", username)\n        .set(\"redirect\", true);\n    },\n    [REGISTER_FAILURE]: (state, action) => {\n      return state\n        .setIn([\"register\", \"loading\"], false)\n        .setIn([\"register\", \"error\"], action.payload.error);\n    },\n    [CHANGE_REG_INPUT]: (state, action) => {\n      const { type, value } = action.payload;\n      return state.setIn([\"register\", type], value);\n    },\n    [REG_INPUT_ERROR]: (state, action) => {\n      const { error } = action.payload;\n      return state.setIn([\"register\", \"inputError\"], error);\n    },\n    [LOGOUT]: (state, action) => {\n      localStorage.removeItem(\"auth\");\n      return state\n        .set(\"logged\", false)\n        .set(\"authToken\", null)\n        .set(\"userId\", null)\n        .set(\"username\", null)\n        .set(\"redirect\", false);\n    },\n    [TEMP_LOGIN]: (state, action) => {\n      return state.set(\"logged\", true);\n    }\n  },\n  initialState\n);\n"]},"metadata":{},"sourceType":"module"}