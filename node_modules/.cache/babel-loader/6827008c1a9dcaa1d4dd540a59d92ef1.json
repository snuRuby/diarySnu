{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/src/containers/edit/EditBeatContainer.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { Redirect } from \"react-router-dom\";\nimport EditBeat from \"components/edit/EditBeat\";\nimport * as api from \"lib/api\";\nimport * as beatsActions from \"store/modules/beats\";\nimport * as licensesActions from \"store/modules/licenses\";\n\nvar EditBeatContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditBeatContainer, _Component);\n\n  function EditBeatContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EditBeatContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditBeatContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.init =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _this$props, BeatsActions, LicensesActions, res;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = _this.props, BeatsActions = _this$props.BeatsActions, LicensesActions = _this$props.LicensesActions;\n\n              if (!_this.props.beatId) {\n                _context.next = 16;\n                break;\n              }\n\n              // beatId가 이미 존재하는 경우는 beat를 수정하는 상황인 것.\n              // beatId에 맞는 정보를 갖고와야 한다.\n              BeatsActions.getBeatsBegin();\n              _context.prev = 3;\n              _context.next = 6;\n              return api.getBeatById(_this.props.beatId);\n\n            case 6:\n              res = _context.sent;\n              BeatsActions.getBeatSuccess(res);\n\n              if (res.data.licenses) {// TODO: licenses in beat model.\n              } else {\n                LicensesActions.initialize();\n              }\n\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](3);\n              BeatsActions.getBeatFailure(_context.t0);\n\n            case 14:\n              _context.next = 16;\n              break;\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[3, 11]]);\n    }));\n\n    _this.handleChange = function (e) {\n      var BeatsActions = _this.props.BeatsActions;\n      BeatsActions.setBeatDetail({\n        key: e.target.name,\n        value: e.target.value\n      });\n    };\n\n    _this.handleUpload = function (name) {\n      return function (event) {\n        var BeatsActions = _this.props.BeatsActions;\n        console.log(event.target.files[0]);\n        BeatsActions.setBeatDetail({\n          key: name,\n          value: event.target.files[0]\n        });\n      };\n    };\n\n    _this.handleCheck = function (name) {\n      return function (event) {\n        var LicensesActions = _this.props.LicensesActions;\n        LicensesActions.setLicense({\n          name: name,\n          checked: event.target.checked\n        });\n      };\n    };\n\n    _this.changePrice = function (name) {\n      return function (event) {\n        var LicensesActions = _this.props.LicensesActions;\n        LicensesActions.setPrice({\n          name: name,\n          price: event.target.value\n        });\n      };\n    };\n\n    _this.onSubmit =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var _this$props2, BeatsActions, beat, formData, response, error;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$props2 = _this.props, BeatsActions = _this$props2.BeatsActions, beat = _this$props2.beat;\n              BeatsActions.postBeatsBegin();\n              formData = new FormData();\n              formData.append(\"title\", beat.get(\"title\"));\n              formData.append(\"description\", beat.get(\"description\")); // formData.append('tags', beat.get('tags'));\n\n              formData.append(\"mbeat\", beat.get(\"mbeat\"));\n              formData.append(\"mimage\", beat.get(\"mimage\"));\n              _context2.prev = 7;\n              _context2.next = 10;\n              return api.createBeat(formData);\n\n            case 10:\n              response = _context2.sent;\n              console.log(response);\n\n              if (!(response.status === 200)) {\n                _context2.next = 14;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", BeatsActions.postBeatsSuccess());\n\n            case 14:\n              _context2.next = 20;\n              break;\n\n            case 16:\n              _context2.prev = 16;\n              _context2.t0 = _context2[\"catch\"](7);\n              error = {\n                error: _context2.t0.message\n              };\n              return _context2.abrupt(\"return\", BeatsActions.postBeatsFailure(error));\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this, [[7, 16]]);\n    }));\n\n    _this.addTag = function () {\n      var _this$props3 = _this.props,\n          BeatsActions = _this$props3.BeatsActions,\n          beat = _this$props3.beat;\n      var newTag = beat.toJS().tag;\n      var tagList = beat.toJS().tags || [];\n      if (!newTag || tagList.includes(newTag)) return;\n      tagList.push(newTag);\n      BeatsActions.setBeatDetail({\n        key: \"tags\",\n        value: tagList\n      });\n    };\n\n    _this.removeTag = function (tag) {\n      var _this$props4 = _this.props,\n          BeatsActions = _this$props4.BeatsActions,\n          beat = _this$props4.beat;\n      var tagList = beat.toJS().tags;\n      BeatsActions.setBeatDetail({\n        key: \"tags\",\n        value: tagList.filter(function (t) {\n          return t !== tag;\n        })\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(EditBeatContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.init();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.post.get(\"success\") ? React.createElement(Redirect, {\n        to: \"beat/\".concat(this.props.beat.get(\"id\")),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }) : React.createElement(EditBeat, {\n        onChange: this.handleChange,\n        onUpload: this.handleUpload,\n        onCheck: this.handleCheck,\n        onSubmit: this.onSubmit,\n        changePrice: this.changePrice,\n        addTag: this.addTag,\n        removeTag: this.removeTag,\n        beat: this.props.beat.toJS(),\n        licenses: {\n          standard: this.props.standard.toJS(),\n          premium: this.props.premium.toJS(),\n          unlimited: this.props.unlimited.toJS()\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return EditBeatContainer;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    beat: state.beats.get(\"beat\"),\n    post: state.beats.get(\"post\"),\n    standard: state.licenses.get(\"standard\"),\n    premium: state.licenses.get(\"premium\"),\n    unlimited: state.licenses.get(\"unlimited\")\n  };\n}, function (dispatch) {\n  return {\n    BeatsActions: bindActionCreators(beatsActions, dispatch),\n    LicensesActions: bindActionCreators(licensesActions, dispatch)\n  };\n})(EditBeatContainer);","map":{"version":3,"sources":["/Users/ruby/Desktop/수업/2020-1/벤창웹2/frontend/src/containers/edit/EditBeatContainer.js"],"names":["React","Component","connect","bindActionCreators","Redirect","EditBeat","api","beatsActions","licensesActions","EditBeatContainer","init","props","BeatsActions","LicensesActions","beatId","getBeatsBegin","getBeatById","res","getBeatSuccess","data","licenses","initialize","getBeatFailure","handleChange","e","setBeatDetail","key","target","name","value","handleUpload","event","console","log","files","handleCheck","setLicense","checked","changePrice","setPrice","price","onSubmit","beat","postBeatsBegin","formData","FormData","append","get","createBeat","response","status","postBeatsSuccess","error","message","postBeatsFailure","addTag","newTag","toJS","tag","tagList","tags","includes","push","removeTag","filter","t","post","standard","premium","unlimited","state","beats","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { Redirect } from \"react-router-dom\";\n\nimport EditBeat from \"components/edit/EditBeat\";\nimport * as api from \"lib/api\";\nimport * as beatsActions from \"store/modules/beats\";\nimport * as licensesActions from \"store/modules/licenses\";\n\nclass EditBeatContainer extends Component {\n  componentDidMount() {\n    this.init();\n  }\n  init = async () => {\n    const { BeatsActions, LicensesActions } = this.props;\n    if (this.props.beatId) {\n      // beatId가 이미 존재하는 경우는 beat를 수정하는 상황인 것.\n      // beatId에 맞는 정보를 갖고와야 한다.\n      BeatsActions.getBeatsBegin();\n      try {\n        const res = await api.getBeatById(this.props.beatId);\n        BeatsActions.getBeatSuccess(res);\n        if (res.data.licenses) {\n          // TODO: licenses in beat model.\n        } else {\n          LicensesActions.initialize();\n        }\n      } catch (error) {\n        BeatsActions.getBeatFailure(error);\n      }\n    } else {\n      // beatId가 없는 상태는 새로운 비트를 만드는 과정\n    }\n  };\n  handleChange = e => {\n    const { BeatsActions } = this.props;\n    BeatsActions.setBeatDetail({ key: e.target.name, value: e.target.value });\n  };\n  handleUpload = name => event => {\n    const { BeatsActions } = this.props;\n    console.log(event.target.files[0]);\n    BeatsActions.setBeatDetail({ key: name, value: event.target.files[0] });\n  };\n  handleCheck = name => event => {\n    const { LicensesActions } = this.props;\n    LicensesActions.setLicense({ name: name, checked: event.target.checked });\n  };\n  changePrice = name => event => {\n    const { LicensesActions } = this.props;\n    LicensesActions.setPrice({ name: name, price: event.target.value });\n  };\n  onSubmit = async () => {\n    const { BeatsActions, beat } = this.props;\n    BeatsActions.postBeatsBegin();\n\n    let formData = new FormData();\n    formData.append(\"title\", beat.get(\"title\"));\n    formData.append(\"description\", beat.get(\"description\"));\n    // formData.append('tags', beat.get('tags'));\n    formData.append(\"mbeat\", beat.get(\"mbeat\"));\n    formData.append(\"mimage\", beat.get(\"mimage\"));\n    try {\n      const response = await api.createBeat(formData);\n      console.log(response);\n      if (response.status === 200) {\n        return BeatsActions.postBeatsSuccess();\n      }\n    } catch (e) {\n      const error = { error: e.message };\n      return BeatsActions.postBeatsFailure(error);\n    }\n  };\n  addTag = () => {\n    const { BeatsActions, beat } = this.props;\n    const newTag = beat.toJS().tag;\n    let tagList = beat.toJS().tags || [];\n    if (!newTag || tagList.includes(newTag)) return;\n    tagList.push(newTag);\n    BeatsActions.setBeatDetail({ key: \"tags\", value: tagList });\n  };\n  removeTag = tag => {\n    const { BeatsActions, beat } = this.props;\n    let tagList = beat.toJS().tags;\n    BeatsActions.setBeatDetail({\n      key: \"tags\",\n      value: tagList.filter(t => t !== tag)\n    });\n  };\n  render() {\n    return this.props.post.get(\"success\") ? (\n      <Redirect to={`beat/${this.props.beat.get(\"id\")}`} />\n    ) : (\n      <EditBeat\n        onChange={this.handleChange}\n        onUpload={this.handleUpload}\n        onCheck={this.handleCheck}\n        onSubmit={this.onSubmit}\n        changePrice={this.changePrice}\n        addTag={this.addTag}\n        removeTag={this.removeTag}\n        beat={this.props.beat.toJS()}\n        licenses={{\n          standard: this.props.standard.toJS(),\n          premium: this.props.premium.toJS(),\n          unlimited: this.props.unlimited.toJS()\n        }}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    beat: state.beats.get(\"beat\"),\n    post: state.beats.get(\"post\"),\n    standard: state.licenses.get(\"standard\"),\n    premium: state.licenses.get(\"premium\"),\n    unlimited: state.licenses.get(\"unlimited\")\n  }),\n  dispatch => ({\n    BeatsActions: bindActionCreators(beatsActions, dispatch),\n    LicensesActions: bindActionCreators(licensesActions, dispatch)\n  })\n)(EditBeatContainer);\n"]},"metadata":{},"sourceType":"module"}