{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ruby/Desktop/\\uC218\\uC5C5/2020-1/\\u1107\\u1166\\u11AB\\u110E\\u1161\\u11BC\\u110B\\u1170\\u11B82/frontend/src/containers/account/LoginContainer.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport * as api from \"lib/api\";\nimport * as accountsActions from \"store/modules/accounts\";\nimport * as baseActions from \"store/modules/base\";\nimport LoginForm from \"components/account/loginForm\";\n\nvar LoginContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginContainer, _Component);\n\n  function LoginContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LoginContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LoginContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.onKeyPress = function (e) {\n      if (e.key === \"Enter\") {\n        _this.onSubmit();\n      }\n    };\n\n    _this.handleChange = function (e) {\n      var AccountsActions = _this.props.AccountsActions;\n      AccountsActions.changeLoginInput({\n        type: e.target.name,\n        value: e.target.value\n      });\n    };\n\n    _this.handlePageChange = function () {\n      _this.props.history.push(\"/signup\");\n    };\n\n    _this.onSubmit =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _this$props, username, password, AccountsActions, BaseActions, response, error;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = _this.props, username = _this$props.username, password = _this$props.password, AccountsActions = _this$props.AccountsActions, BaseActions = _this$props.BaseActions;\n              BaseActions.showLoading();\n              AccountsActions.loginBegin();\n              BaseActions.hideModal(\"login\");\n              _context.prev = 4;\n              _context.next = 7;\n              return api.login({\n                username: username,\n                password: password\n              });\n\n            case 7:\n              response = _context.sent;\n              BaseActions.hideLoading();\n\n              if (!(response.status === 200)) {\n                _context.next = 11;\n                break;\n              }\n\n              return _context.abrupt(\"return\", AccountsActions.loginSuccess(response.data));\n\n            case 11:\n              return _context.abrupt(\"return\", AccountsActions.loginFailure(response.data[\"error\"]));\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](4);\n              error = {\n                error: _context.t0.message\n              };\n              BaseActions.hideLoading();\n              AccountsActions.loginFailure(error);\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[4, 14]]);\n    }));\n    return _this;\n  }\n\n  _createClass(LoginContainer, [{\n    key: \"render\",\n    value: function render() {\n      var handleChange = this.handleChange,\n          handlePageChange = this.handlePageChange,\n          onSubmit = this.onSubmit,\n          onKeyPress = this.onKeyPress;\n      var _this$props2 = this.props,\n          loading = _this$props2.loading,\n          error = _this$props2.error,\n          redirect = _this$props2.redirect,\n          logged = _this$props2.logged,\n          onClose = _this$props2.onClose;\n\n      if (redirect || logged) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        });\n      }\n\n      if (loading) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, \"loading...\");\n      }\n\n      return React.createElement(LoginForm, {\n        onSubmit: onSubmit,\n        onKeyPress: onKeyPress,\n        handleChange: handleChange,\n        handlePageChange: handlePageChange,\n        onCloseModal: onClose,\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return LoginContainer;\n}(Component);\n\nexport default connect(function (state) {\n  return {\n    username: state.accounts.getIn([\"login\", \"username\"]),\n    password: state.accounts.getIn([\"login\", \"password\"]),\n    loading: state.accounts.getIn([\"login\", \"loading\"]),\n    error: state.accounts.getIn([\"login\", \"error\"]),\n    redirect: state.accounts.get(\"redirect\"),\n    logged: state.accounts.get(\"logged\")\n  };\n}, function (dispatch) {\n  return {\n    AccountsActions: bindActionCreators(accountsActions, dispatch),\n    BaseActions: bindActionCreators(baseActions, dispatch)\n  };\n})(withRouter(LoginContainer));","map":{"version":3,"sources":["/Users/ruby/Desktop/수업/2020-1/벤창웹2/frontend/src/containers/account/LoginContainer.js"],"names":["React","Component","connect","bindActionCreators","Redirect","withRouter","api","accountsActions","baseActions","LoginForm","LoginContainer","onKeyPress","e","key","onSubmit","handleChange","AccountsActions","props","changeLoginInput","type","target","name","value","handlePageChange","history","push","username","password","BaseActions","showLoading","loginBegin","hideModal","login","response","hideLoading","status","loginSuccess","data","loginFailure","error","message","loading","redirect","logged","onClose","state","accounts","getIn","get","dispatch"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,kBAArC;AAEA,OAAO,KAAKC,GAAZ,MAAqB,SAArB;AACA,OAAO,KAAKC,eAAZ,MAAiC,wBAAjC;AACA,OAAO,KAAKC,WAAZ,MAA6B,oBAA7B;AACA,OAAOC,SAAP,MAAsB,8BAAtB;;IAEMC,c;;;;;;;;;;;;;;;;;;UACJC,U,GAAa,UAAAC,CAAC,EAAI;AAChB,UAAIA,CAAC,CAACC,GAAF,KAAU,OAAd,EAAuB;AACrB,cAAKC,QAAL;AACD;AACF,K;;UACDC,Y,GAAe,UAAAH,CAAC,EAAI;AAAA,UACVI,eADU,GACU,MAAKC,KADf,CACVD,eADU;AAElBA,MAAAA,eAAe,CAACE,gBAAhB,CAAiC;AAC/BC,QAAAA,IAAI,EAAEP,CAAC,CAACQ,MAAF,CAASC,IADgB;AAE/BC,QAAAA,KAAK,EAAEV,CAAC,CAACQ,MAAF,CAASE;AAFe,OAAjC;AAID,K;;UACDC,gB,GAAmB,YAAM;AACvB,YAAKN,KAAL,CAAWO,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB;AACD,K;;UACDX,Q;;;;6BAAW;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,4BACoD,MAAKG,KADzD,EACDS,QADC,eACDA,QADC,EACSC,QADT,eACSA,QADT,EACmBX,eADnB,eACmBA,eADnB,EACoCY,WADpC,eACoCA,WADpC;AAETA,cAAAA,WAAW,CAACC,WAAZ;AACAb,cAAAA,eAAe,CAACc,UAAhB;AACAF,cAAAA,WAAW,CAACG,SAAZ,CAAsB,OAAtB;AAJS;AAAA;AAAA,qBAMgBzB,GAAG,CAAC0B,KAAJ,CAAU;AAAEN,gBAAAA,QAAQ,EAARA,QAAF;AAAYC,gBAAAA,QAAQ,EAARA;AAAZ,eAAV,CANhB;;AAAA;AAMDM,cAAAA,QANC;AAOPL,cAAAA,WAAW,CAACM,WAAZ;;AAPO,oBAQHD,QAAQ,CAACE,MAAT,KAAoB,GARjB;AAAA;AAAA;AAAA;;AAAA,+CASEnB,eAAe,CAACoB,YAAhB,CAA6BH,QAAQ,CAACI,IAAtC,CATF;;AAAA;AAAA,+CAWArB,eAAe,CAACsB,YAAhB,CAA6BL,QAAQ,CAACI,IAAT,CAAc,OAAd,CAA7B,CAXA;;AAAA;AAAA;AAAA;AAaDE,cAAAA,KAbC,GAaO;AAAEA,gBAAAA,KAAK,EAAE,YAAEC;AAAX,eAbP;AAcPZ,cAAAA,WAAW,CAACM,WAAZ;AACAlB,cAAAA,eAAe,CAACsB,YAAhB,CAA6BC,KAA7B;;AAfO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;;;;;6BAmBF;AAAA,UACCxB,YADD,GAC0D,IAD1D,CACCA,YADD;AAAA,UACeQ,gBADf,GAC0D,IAD1D,CACeA,gBADf;AAAA,UACiCT,QADjC,GAC0D,IAD1D,CACiCA,QADjC;AAAA,UAC2CH,UAD3C,GAC0D,IAD1D,CAC2CA,UAD3C;AAAA,yBAE+C,KAAKM,KAFpD;AAAA,UAECwB,OAFD,gBAECA,OAFD;AAAA,UAEUF,KAFV,gBAEUA,KAFV;AAAA,UAEiBG,QAFjB,gBAEiBA,QAFjB;AAAA,UAE2BC,MAF3B,gBAE2BA,MAF3B;AAAA,UAEmCC,OAFnC,gBAEmCA,OAFnC;;AAGP,UAAIF,QAAQ,IAAIC,MAAhB,EAAwB;AACtB,eAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;AACD,UAAIF,OAAJ,EAAa;AACX,eAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAP;AACD;;AACD,aACE,oBAAC,SAAD;AACE,QAAA,QAAQ,EAAE3B,QADZ;AAEE,QAAA,UAAU,EAAEH,UAFd;AAGE,QAAA,YAAY,EAAEI,YAHhB;AAIE,QAAA,gBAAgB,EAAEQ,gBAJpB;AAKE,QAAA,YAAY,EAAEqB,OALhB;AAME,QAAA,KAAK,EAAEL,KANT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAUD;;;;EAtD0BtC,S;;AAyD7B,eAAeC,OAAO,CACpB,UAAA2C,KAAK;AAAA,SAAK;AACRnB,IAAAA,QAAQ,EAAEmB,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqB,CAAC,OAAD,EAAU,UAAV,CAArB,CADF;AAERpB,IAAAA,QAAQ,EAAEkB,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqB,CAAC,OAAD,EAAU,UAAV,CAArB,CAFF;AAGRN,IAAAA,OAAO,EAAEI,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqB,CAAC,OAAD,EAAU,SAAV,CAArB,CAHD;AAIRR,IAAAA,KAAK,EAAEM,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqB,CAAC,OAAD,EAAU,OAAV,CAArB,CAJC;AAKRL,IAAAA,QAAQ,EAAEG,KAAK,CAACC,QAAN,CAAeE,GAAf,CAAmB,UAAnB,CALF;AAMRL,IAAAA,MAAM,EAAEE,KAAK,CAACC,QAAN,CAAeE,GAAf,CAAmB,QAAnB;AANA,GAAL;AAAA,CADe,EASpB,UAAAC,QAAQ;AAAA,SAAK;AACXjC,IAAAA,eAAe,EAAEb,kBAAkB,CAACI,eAAD,EAAkB0C,QAAlB,CADxB;AAEXrB,IAAAA,WAAW,EAAEzB,kBAAkB,CAACK,WAAD,EAAcyC,QAAd;AAFpB,GAAL;AAAA,CATY,CAAP,CAab5C,UAAU,CAACK,cAAD,CAbG,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { Redirect, withRouter } from \"react-router-dom\";\n\nimport * as api from \"lib/api\";\nimport * as accountsActions from \"store/modules/accounts\";\nimport * as baseActions from \"store/modules/base\";\nimport LoginForm from \"components/account/loginForm\";\n\nclass LoginContainer extends Component {\n  onKeyPress = e => {\n    if (e.key === \"Enter\") {\n      this.onSubmit();\n    }\n  };\n  handleChange = e => {\n    const { AccountsActions } = this.props;\n    AccountsActions.changeLoginInput({\n      type: e.target.name,\n      value: e.target.value\n    });\n  };\n  handlePageChange = () => {\n    this.props.history.push(\"/signup\");\n  };\n  onSubmit = async () => {\n    const { username, password, AccountsActions, BaseActions } = this.props;\n    BaseActions.showLoading();\n    AccountsActions.loginBegin();\n    BaseActions.hideModal(\"login\");\n    try {\n      const response = await api.login({ username, password });\n      BaseActions.hideLoading();\n      if (response.status === 200) {\n        return AccountsActions.loginSuccess(response.data);\n      }\n      return AccountsActions.loginFailure(response.data[\"error\"]); // TODO: collab. needed with server side\n    } catch (e) {\n      const error = { error: e.message };\n      BaseActions.hideLoading();\n      AccountsActions.loginFailure(error);\n    }\n  };\n\n  render() {\n    const { handleChange, handlePageChange, onSubmit, onKeyPress } = this;\n    const { loading, error, redirect, logged, onClose } = this.props;\n    if (redirect || logged) {\n      return <Redirect to=\"/\" />;\n    }\n    if (loading) {\n      return <div>loading...</div>;\n    }\n    return (\n      <LoginForm\n        onSubmit={onSubmit}\n        onKeyPress={onKeyPress}\n        handleChange={handleChange}\n        handlePageChange={handlePageChange}\n        onCloseModal={onClose}\n        error={error}\n      />\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    username: state.accounts.getIn([\"login\", \"username\"]),\n    password: state.accounts.getIn([\"login\", \"password\"]),\n    loading: state.accounts.getIn([\"login\", \"loading\"]),\n    error: state.accounts.getIn([\"login\", \"error\"]),\n    redirect: state.accounts.get(\"redirect\"),\n    logged: state.accounts.get(\"logged\")\n  }),\n  dispatch => ({\n    AccountsActions: bindActionCreators(accountsActions, dispatch),\n    BaseActions: bindActionCreators(baseActions, dispatch)\n  })\n)(withRouter(LoginContainer));\n"]},"metadata":{},"sourceType":"module"}